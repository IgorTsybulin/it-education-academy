<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
	<title>Работа со строками</title>
</head>
<body>

  <h3>Смотрите в консоль!</h3>

  <script>
    "use strict";

    /*
      Изменение регистра букв строки
     */

    console.log( "Internet".toUpperCase() ); // INTERNET
    console.log( "InterneT".toLowerCase() ); // internet


    /*
      Поиск подстроки

      Для поиска подстроки есть метод:

      indexOf(подстрока[, начальная_позиция]).

      Он возвращает позицию, на которой находится подстрока или -1, если ничего не найдено.

      Необязательный второй аргумент позволяет искать, начиная с указанной позиции. Например, первый раз "id" появляется на позиции 1. Чтобы найти его следующее появление надо запустить поиск с индекса 2
     */
    console.log('------------------------------------------');

    var str = "Widget with id";
    console.log('string:', str);

    console.log('------------------------------------------');

    console.log('str.indexOf("Widget")\t\t', str.indexOf("Widget")); // 0, "Widget" нашел вначале строки, поэтому индекс 0

    console.log('str.indexOf("id")\t\t\t', str.indexOf("id")); // 1, "id" нашел на первой позиции, присмотритесь к строке внимательней

    console.log('str.indexOf("widget")\t\t', str.indexOf("widget")); // -1, Вообще не нашел, т.к. разный регистр букв

    console.log('str.indexOf("id", 2)\t\t', str.indexOf("id", 2)) // 12, т.к. поиск происходил с индекса 2

    console.log('------------------------------------------');


    /*
      Поиск всех вхождений

      Чтобы найти все вхождения подстроки, нужно запустить indexOf() в цикле. Как только получаем очередную позицию – начинаем следующий поиск со следующей.

      Такой цикл начинает поиск с позиции 0, затем найдя подстроку на позиции foundPos, следующий поиск продолжит с позиции pos = foundPos + 1, и так далее, пока что-то находит.
     */
    var str = "Ослик Иа-Иа посмотрел на виадук"; // ищем в этой строке
    var target = "Иа"; // цель поиска

    console.log('Позиции подстроки «' + target + '» в строке «' + str + '»:');

    var pos = 0;
    while (true) {
      var foundPos = str.indexOf(target, pos);
      if (foundPos == -1) break;

      console.log( foundPos ); // нашли на этой позиции
      pos = foundPos + 1; // продолжить поиск со следующей
    }

    console.log('------------------------------------------');


    /*
      Взятие подстроки: substr, substring, slice.


      ====== substring(start [, end]) ==================================

      Метод substring(start, end) возвращает подстроку с позиции start до, но не включая, end.

      Если аргумент end отсутствует, то идет до конца строки.


      ====== substr(start [, length]) ==================================

      Первый аргумент имеет такой же смысл, как и в substring, а второй содержит не конечную позицию, а количество символов.

      Если второго аргумента нет – подразумевается «до конца строки».


      ====== slice(start [, end]) ======================================

      Возвращает часть строки от позиции start до, но не включая, позиции end. Смысл параметров – такой же как в substring.
     */
    console.log('str.substring(0,1)\t\t', str.substring(0,1)); // "О", символы с позиции 0 по 1 не включая 1.
    console.log('str.substring(6)\t\t', str.substring(6)); // "Иа-Иа посмотрел на виадук", символы с позиции 5 до конца
    console.log('str.substr(2,3)\t\t\t', str.substr(2,3)); // "лик", со 2-й позиции 3 символа

    console.log('str.slice(0,1)\t\t\t', str.slice(0,1)); // "О", символы с позиции 0 по 1 не включая 1, как substring, но:
    console.log('"testme".slice(1, -1)\t', "testme".slice(1, -1)); // "estm", от 1 позиции до первой с конца.

    console.log('------------------------------------------');


    /*
      Обработка отрицательных аргументов

      substring — отрицательные аргументы интерпретируются как равные нулю. Слишком большие значения усекаются до длины строки. Кроме того, если start > end, то аргументы меняются местами, т.е. возвращается участок строки между start и end.

      slice — отрицательные значения отсчитываются от конца строки.
     */
    console.log('"testme".substring(-2)\t\t', "testme".substring(-2)); // "testme", -2 становится 0
    console.log('"testme".substring(4, -1)\t', "testme".substring(4, -1)); // "test", от 0 до 4 позиции, не включая ее
    console.log('"testme".slice(-2)\t\t\t', "testme".slice(-2)); // "me", от второй позиции с конца
    console.log('"testme".slice(4, -1)\t\t', "testme".slice(4, -1)); // "m", от 4 позиции до первой с конца.

    console.log('------------------------------------------');
  </script>

  <p>Конец документа</p>

</body>
</html>